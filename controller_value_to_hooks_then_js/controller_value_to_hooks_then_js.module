<?php

use Drupal\controller_value_to_hooks_then_js\Controller\TestController;

function controller_value_to_hooks_then_js_page_attachments(array &$attachments) {

  //$mydata = \Drupal\controller_value_to_hooks_then_js\Controller\TestController::content();

  $path = $current_path = \Drupal::service('path.current')->getPath();
  $path_args = explode('/', $current_path);

  if($path_args[1] == 'controller_value_to_hooks') {

      $contentController = new TestController();
      $mydata = $contentController->content();

      //print_r($mydata['#title']);
      //die();

      $attachments['#attached']['library'][] = 'controller_value_to_hooks_then_js/mylib-js';
      // pass variable to Drupal.Settings
      $attachments['#attached']['drupalSettings']['mydata'] = $mydata['#title'];

  }

}